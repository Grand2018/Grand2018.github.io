<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Openclash 链式代理 relay 设置 固定IP(设备）走指定线路</title>
      <link href="/2025/01/08/openclash/"/>
      <url>/2025/01/08/openclash/</url>
      
        <content type="html"><![CDATA[<h2 id="引用：”-ChatGPT-生成一个简单能运行的-clash-yaml-配置文件-“"><a href="#引用：”-ChatGPT-生成一个简单能运行的-clash-yaml-配置文件-“" class="headerlink" title="引用：” ChatGPT 生成一个简单能运行的 clash .yaml 配置文件 “"></a>引用：” ChatGPT 生成一个简单能运行的 clash .yaml 配置文件 “</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">引用：<span class="string">&quot; ChatGPT 生成一个简单能运行的 clash .yaml 配置文件 &quot;</span></span><br><span class="line"></span><br><span class="line">port: 7890                                 <span class="comment"># HTTP 代理端口</span></span><br><span class="line">socks-port: 7891                           <span class="comment"># SOCKS5 代理端口</span></span><br><span class="line">allow-lan: <span class="literal">true</span>                            <span class="comment"># 是否允许局域网访问代理</span></span><br><span class="line">mode: rule                                 <span class="comment"># 模式设置为规则模式（rule）</span></span><br><span class="line">log-level: info                            <span class="comment"># 日志级别，info 表示记录信息日志</span></span><br><span class="line"></span><br><span class="line">proxies:                                   <span class="comment"># 配置代理列表</span></span><br><span class="line">  - name: <span class="string">&quot;ExampleProxy&quot;</span>                   <span class="comment"># 代理名称</span></span><br><span class="line">    <span class="built_in">type</span>: socks5                           <span class="comment"># 代理类型，使用 SOCKS5</span></span><br><span class="line">    server: 127.0.0.1                      <span class="comment"># 代理服务器地址，本地地址</span></span><br><span class="line">    port: 1080                             <span class="comment"># 代理服务器端口</span></span><br><span class="line"></span><br><span class="line">proxy-groups:                              <span class="comment"># 配置代理组</span></span><br><span class="line">  - name: <span class="string">&quot;ProxyGroup&quot;</span>                     <span class="comment"># 代理组名称</span></span><br><span class="line">    <span class="built_in">type</span>: <span class="keyword">select</span>                           <span class="comment"># 选择类型代理组</span></span><br><span class="line">    proxies:                               <span class="comment"># 代理组中的代理列表</span></span><br><span class="line">      - <span class="string">&quot;ExampleProxy&quot;</span>                     <span class="comment"># 使用 ExampleProxy 代理</span></span><br><span class="line">      - <span class="string">&quot;DIRECT&quot;</span>                           <span class="comment"># 直接连接（不通过代理）</span></span><br><span class="line"></span><br><span class="line">rules:  <span class="comment"># 配置规则部分</span></span><br><span class="line">  - <span class="string">&#x27;DOMAIN-SUFFIX,google.com,ProxyGroup&#x27;</span>  <span class="comment"># 匹配所有以 google.com 结尾的域名，使用 ProxyGroup</span></span><br><span class="line">  - <span class="string">&#x27;DOMAIN-SUFFIX,github.com,ProxyGroup&#x27;</span>  <span class="comment"># 匹配所有以 github.com 结尾的域名，使用 ProxyGroup</span></span><br><span class="line">  - <span class="string">&#x27;MATCH,DIRECT&#x27;</span>                         <span class="comment"># 默认规则，匹配所有其他流量，直接连接</span></span><br></pre></td></tr></table></figure><h2 id="proxies-proxy-groups-rules-关注这三部分："><a href="#proxies-proxy-groups-rules-关注这三部分：" class="headerlink" title="proxies: &#x2F; proxy-groups: &#x2F; rules: 关注这三部分："></a>proxies: &#x2F; proxy-groups: &#x2F; rules: 关注这三部分：</h2><h3 id="“-proxies-“-所有节点都写在这里。"><a href="#“-proxies-“-所有节点都写在这里。" class="headerlink" title="“ proxies: “      -所有节点都写在这里。"></a>“ proxies: “      -所有节点都写在这里。</h3><h3 id="“-proxy-groups-“-这里是写选择的，指定-入口-“线路”-出口线路-“自建节点”。"><a href="#“-proxy-groups-“-这里是写选择的，指定-入口-“线路”-出口线路-“自建节点”。" class="headerlink" title="“ proxy-groups: “ -这里是写选择的，指定 入口 “线路” -&gt; 出口线路 “自建节点”。"></a>“ proxy-groups: “ -这里是写选择的，指定 入口 “线路” -&gt; 出口线路 “自建节点”。</h3><h3 id="“-rules-“-固定IP（设备）指定线路-在这一步。"><a href="#“-rules-“-固定IP（设备）指定线路-在这一步。" class="headerlink" title="“ rules: “        -固定IP（设备）指定线路 在这一步。"></a>“ rules: “        -固定IP（设备）指定线路 在这一步。</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment">### proxies: ⬆️ 上方 ... 的内容 直接复制 ”线路订阅配置文件“ 或 “ 参考 clash 默认配置 &quot; ⬆️</span></span><br><span class="line"></span><br><span class="line">proxies:                                   <span class="comment"># 配置代理列表</span></span><br><span class="line"><span class="comment">###节点写法一</span></span><br><span class="line">  - name: <span class="string">&quot;ExampleProxy&quot;</span>                   <span class="comment"># 代理名称</span></span><br><span class="line">    <span class="built_in">type</span>: socks5                           <span class="comment"># 代理类型，使用 SOCKS5</span></span><br><span class="line">    server: 127.0.0.1                      <span class="comment"># 代理服务器地址，本地地址</span></span><br><span class="line">    port: 1080                             <span class="comment"># 代理服务器端口</span></span><br><span class="line"></span><br><span class="line"><span class="comment">###节点写法二 “线路节点” 或 “自建节点” 所有节点都写在 proxies: 下，待会在 proxy-groups: 写选择。</span></span><br><span class="line"></span><br><span class="line">  - &#123;name: 🇺🇸 USA Seattle 01, server: xxx.xxx.xyz, port: 66666, <span class="built_in">type</span>: trojan, password: ******, sni: v1-dy.****.com, skip-cert-verify: <span class="literal">true</span>, udp: <span class="literal">true</span>&#125;</span><br><span class="line">  - &#123;name: 🇺🇸 USA Seattle 02, server: xxx.xxx.xyz, port: 66666, <span class="built_in">type</span>: trojan, password: ******, sni: v1-dy.****.com, skip-cert-verify: <span class="literal">true</span>, udp: <span class="literal">true</span>&#125;</span><br><span class="line">  - &#123;name: off_w, server: 127.0.0.1, port: 6666, <span class="built_in">type</span>: socks5, username: admin,password: admin, skip-cert-verify: <span class="literal">true</span>, udp: <span class="literal">true</span>&#125;</span><br><span class="line"></span><br><span class="line">proxy-groups:</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="“-proxy-groups-“-理解-select-url-test-relay-这些模式"><a href="#“-proxy-groups-“-理解-select-url-test-relay-这些模式" class="headerlink" title="“ proxy-groups: “ 理解 select &#x2F; url-test &#x2F; relay 这些模式"></a>“ proxy-groups: “ 理解 select &#x2F; url-test &#x2F; relay 这些模式</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">### select     手动选择（固定节点）</span></span><br><span class="line"><span class="comment">### url-test   自动切换 - 会根据现有节点,自动测速然后选择最优节点</span></span><br><span class="line"><span class="comment">### relay      链式模式 - 理解 入口节点 -&gt; 出口节点</span></span><br></pre></td></tr></table></figure><h4 id="select-手动选择（固定节点）"><a href="#select-手动选择（固定节点）" class="headerlink" title="select 手动选择（固定节点）"></a>select 手动选择（固定节点）</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">### select     手动选择（固定节点）</span></span><br><span class="line"></span><br><span class="line">proxy-groups:                                    <span class="comment"># 配置代理组</span></span><br><span class="line">  - name: <span class="string">&quot;固定线路01&quot;</span>                              <span class="comment"># 代理组名称</span></span><br><span class="line">    <span class="built_in">type</span>: <span class="keyword">select</span>                                 <span class="comment"># 理解 select / url-test / relay 这些模式</span></span><br><span class="line">    proxies:                                     <span class="comment"># 代理组中的代理列表</span></span><br><span class="line">      - 🇺🇸 USA Seattle 01                        <span class="comment"># 节点相应 proxies: 写的节点。</span></span><br><span class="line"></span><br><span class="line">                                               <span class="comment">### 最终此代理组将会 走固定 “ 🇺🇸 USA Seattle 01 ” 这条线路.  </span></span><br></pre></td></tr></table></figure><h4 id="url-test-自动切换-会根据现有节点-自动测速然后最优节点"><a href="#url-test-自动切换-会根据现有节点-自动测速然后最优节点" class="headerlink" title="url-test   自动切换 - 会根据现有节点,自动测速然后最优节点"></a>url-test   自动切换 - 会根据现有节点,自动测速然后最优节点</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">### url-test   自动切换 - 会根据现有节点,自动测速然后最优节点</span></span><br><span class="line"></span><br><span class="line">  - name: <span class="string">&quot;自动选择&quot;</span>                        <span class="comment"># 代理组名称</span></span><br><span class="line">    <span class="built_in">type</span>: url-test                                <span class="comment"># 理解 select / url-test / relay 这些模式</span></span><br><span class="line">    proxies:                                      <span class="comment"># 代理组中的代理列表</span></span><br><span class="line">      - 🇺🇸 USA Seattle 01                         <span class="comment"># 节点相应 proxies: 写的节点。(测速60ms)</span></span><br><span class="line">      - 🇺🇸 USA Seattle 02                         <span class="comment"># 节点相应 proxies: 写的节点。(测速50ms)</span></span><br><span class="line">    url: <span class="string">&quot;http://www.gstatic.com/generate_204&quot;</span>    <span class="comment"># 理解为测速地址</span></span><br><span class="line">    interval: 300                                 <span class="comment"># 单位为秒，表示每隔 300 秒（5 分钟）</span></span><br><span class="line">    tolerance: 50                                 <span class="comment"># 单位为毫秒，表示在选择最佳代理时，允许的延迟浮动范围</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### 最终此代理组将会 走 “自动选择” 线路.  （50ms 的🇺🇸 USA Seattle 02 ）</span></span><br></pre></td></tr></table></figure><h4 id="relay-链式模式-理解-入口节点-出口节点"><a href="#relay-链式模式-理解-入口节点-出口节点" class="headerlink" title="relay   链式模式 - 理解 入口节点 -&gt; 出口节点"></a>relay   链式模式 - 理解 入口节点 -&gt; 出口节点</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">### relay   链式模式 - 理解 入口节点 -&gt; 出口节点  （重点理解,多看几次,就不难了）</span></span><br><span class="line"></span><br><span class="line">  - name: <span class="string">&quot;链式代理&quot;</span>                             <span class="comment"># 代理组名称</span></span><br><span class="line">    <span class="built_in">type</span>: relay                                 <span class="comment"># 理解 select / url-test / relay 这些模式</span></span><br><span class="line">    proxies:                                    <span class="comment"># 代理组中的代理列表</span></span><br><span class="line">      - 🇺🇸 USA Seattle 01                       <span class="comment"># 入口节点</span></span><br><span class="line">      - off_w                                   <span class="comment"># 最终出口节点（ 显示最终IP )</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### 入口 ：先从国内 访问到 🇺🇸 USA Seattle 01 在链接到 最终出口 off_W .</span></span><br></pre></td></tr></table></figure><h3 id="“-rules-“-固定IP（设备）指定线路-在这一步。-1"><a href="#“-rules-“-固定IP（设备）指定线路-在这一步。-1" class="headerlink" title="“ rules: “        -固定IP（设备）指定线路 在这一步。"></a>“ rules: “        -固定IP（设备）指定线路 在这一步。</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">rules:                                     <span class="comment"># 配置规则部分</span></span><br><span class="line"><span class="comment">### 指定局域网IP 走什么线路</span></span><br><span class="line">  - SRC-IP-CIDR,192.168.8.221/32,固定线路01 <span class="comment"># 局域网 192.168.8.221 走固定线路01 </span></span><br><span class="line">  - SRC-IP-CIDR,192.168.8.222/32,自动选择   <span class="comment"># 局域网 192.168.8.222 走自动选择   （视频，电视，追求快的... 自动选择是最好的了）</span></span><br><span class="line">  - SRC-IP-CIDR,192.168.8.223/32,链式代理   <span class="comment"># 局域网 192.168.8.223 链式代理     （账号运营 需要干净IP环境)</span></span><br><span class="line">  </span><br><span class="line"><span class="comment"># ... ...</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### rules: ⬇️ 下方 ... 的内容 直接复制 ”线路订阅配置文件“ 或 “ 参考 clash 默认配置 &quot; ⬇️</span></span><br><span class="line">  - <span class="string">&#x27;DOMAIN-SUFFIX,google.com,ProxyGroup&#x27;</span>  <span class="comment"># 匹配所有以 google.com 结尾的域名，使用 ProxyGroup</span></span><br><span class="line">  - <span class="string">&#x27;DOMAIN-SUFFIX,github.com,ProxyGroup&#x27;</span>  <span class="comment"># 匹配所有以 github.com 结尾的域名，使用 ProxyGroup</span></span><br><span class="line">  - <span class="string">&#x27;MATCH,DIRECT&#x27;</span>                         <span class="comment"># 默认规则，匹配所有其他流量，直接连接</span></span><br></pre></td></tr></table></figure><h2 id="最终完整的参考-Openclash-链式代理-relay-设置-固定IP-设备）走指定线路-如下："><a href="#最终完整的参考-Openclash-链式代理-relay-设置-固定IP-设备）走指定线路-如下：" class="headerlink" title="最终完整的参考 Openclash 链式代理 relay 设置 固定IP(设备）走指定线路 如下："></a>最终完整的参考 Openclash 链式代理 relay 设置 固定IP(设备）走指定线路 如下：</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">port: 7890                                 <span class="comment"># HTTP 代理端口</span></span><br><span class="line">socks-port: 7891                           <span class="comment"># SOCKS5 代理端口</span></span><br><span class="line">allow-lan: <span class="literal">true</span>                            <span class="comment"># 是否允许局域网访问代理</span></span><br><span class="line">mode: rule                                 <span class="comment"># 模式设置为规则模式（rule）</span></span><br><span class="line">log-level: info                            <span class="comment"># 日志级别，info 表示记录信息日志</span></span><br><span class="line"></span><br><span class="line">proxies:                                   <span class="comment"># 配置代理列表</span></span><br><span class="line">  - &#123;name: 🇺🇸 USA Seattle 00, server: xxx.xxx.xyz, port: 66666, <span class="built_in">type</span>: trojan, password: ******, sni: v1-dy.****.com, skip-cert-verify: <span class="literal">true</span>, udp: <span class="literal">true</span>&#125;</span><br><span class="line">  - &#123;name: off_w, server: 127.0.0.1, port: 6666, <span class="built_in">type</span>: socks5, username: admin,password: admin, skip-cert-verify: <span class="literal">true</span>, udp: <span class="literal">true</span>&#125; </span><br><span class="line"></span><br><span class="line">proxy-groups:</span><br><span class="line">  - name: <span class="string">&quot;固定线路&quot;</span></span><br><span class="line">    <span class="built_in">type</span>: relay</span><br><span class="line">    proxies:</span><br><span class="line">      - 🇺🇸 USA Seattle 00</span><br><span class="line">      - off_w</span><br><span class="line"></span><br><span class="line">rules:  <span class="comment"># 配置规则部分</span></span><br><span class="line">  - SRC-IP-CIDR,192.168.8.221/32,固定线路   <span class="comment"># 局域网 192.168.8.221 走固定线路01 </span></span><br><span class="line">  - <span class="string">&#x27;DOMAIN-SUFFIX,google.com,ProxyGroup&#x27;</span>  <span class="comment"># 匹配所有以 google.com 结尾的域名，使用 ProxyGroup</span></span><br><span class="line">  - <span class="string">&#x27;DOMAIN-SUFFIX,github.com,ProxyGroup&#x27;</span>  <span class="comment"># 匹配所有以 github.com 结尾的域名，使用 ProxyGroup</span></span><br><span class="line">  - <span class="string">&#x27;MATCH,DIRECT&#x27;</span>                         <span class="comment"># 默认规则，匹配所有其他流量，直接连接</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
